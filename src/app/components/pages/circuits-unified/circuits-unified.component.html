<div class="page-container">
  <!-- Table with Help Button -->
  <div class="table-with-help">
    <button
      mat-icon-button
      (click)="toggleHelpPanel()"
      matTooltip="Page help"
      class="floating-help-button">
      <mat-icon>help_outline</mat-icon>
    </button>
    <app-base-table
      [config]="tableConfig"
      [data]="circuits"
      [loading]="loading"
    ></app-base-table>

    <!-- Data Refresh Timestamp (bottom right, with pagination) -->
    <div class="table-footer-info" *ngIf="syncInfo?.lastUpdated">
      <span class="last-updated-text">
        Last updated: {{ getTimeSinceUpdate() }}
      </span>
      <button
        mat-icon-button
        (click)="refreshCircuits()"
        [disabled]="isSyncing()"
        [matTooltip]="isSyncing() ? 'Syncing...' : 'Refresh data'"
        class="refresh-button-small">
        <mat-icon [class.spinning]="isSyncing()">refresh</mat-icon>
      </button>
    </div>
  </div>
</div>

<!-- Page Help Panel -->
<app-page-help-panel
  *ngIf="helpContent"
  [content]="helpContent"
  [isOpen]="helpPanelOpen"
  (closePanel)="helpPanelOpen = false">
</app-page-help-panel>
