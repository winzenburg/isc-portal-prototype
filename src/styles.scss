/* ISC Portal Design System - Material Design 3 Enhanced Theme */
@use '@angular/material' as mat;

@include mat.core();

// Import Material Design 3 theme tokens and utilities
@import 'material-design-3-theme.scss';

/* ISC Portal Color Palette - Based on Design System Analysis */
$isc-primary: mat.define-palette((
  50: #E3F2FD,
  100: #BBDEFB,
  200: #90CAF9,
  300: #64B5F6,
  400: #42A5F5,
  500: #0D62FF,  // Interactive Blue (PRIMARY)
  600: #0A4ECC,  // Deep Blue (hover)
  700: #102F65,  // Comcast Blue (darker states)
  800: #0D2952,
  900: #051F45,
  A100: #82B1FF,
  A200: #448AFF,
  A400: #2979FF,
  A700: #2962FF,
  contrast: (
    50: rgba(black, 0.87),
    100: rgba(black, 0.87),
    200: rgba(black, 0.87),
    300: rgba(black, 0.87),
    400: rgba(black, 0.87),
    500: white,
    600: white,
    700: white,
    800: white,
    900: white,
    A100: rgba(black, 0.87),
    A200: white,
    A400: white,
    A700: white,
  )
));

$isc-accent: mat.define-palette(mat.$gray-palette, 700);

$isc-warn: mat.define-palette((
  50: #FFEBEE,
  100: #FFCDD2,
  200: #EF9A9A,
  300: #E57373,
  400: #EF5350,
  500: #D32F2F,  // Error Red
  600: #C62828,
  700: #B71C1C,
  800: #A71C1C,
  900: #8B1C1C,
  A100: #FF8A80,
  A200: #FF5252,
  A400: #FF1744,
  A700: #D50000,
  contrast: (
    50: rgba(black, 0.87),
    100: rgba(black, 0.87),
    200: rgba(black, 0.87),
    300: rgba(black, 0.87),
    400: white,
    500: white,
    600: white,
    700: white,
    800: white,
    900: white,
    A100: rgba(black, 0.87),
    A200: white,
    A400: white,
    A700: white,
  )
));

$isc-typography: mat.define-typography-config(
  $font-family: '-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif',
  $display-4: mat.define-typography-level(32px, 40px, 600),
  $display-3: mat.define-typography-level(28px, 36px, 600),
  $display-2: mat.define-typography-level(24px, 32px, 600),
  $display-1: mat.define-typography-level(20px, 28px, 600),
  $headline: mat.define-typography-level(18px, 24px, 600),
  $title: mat.define-typography-level(16px, 22px, 600),
  $body-1: mat.define-typography-level(14px, 20px, 400),
  $body-2: mat.define-typography-level(14px, 20px, 500),
  $button: mat.define-typography-level(14px, 14px, 500),
  $caption: mat.define-typography-level(12px, 16px, 400),
);

$isc-theme: mat.define-light-theme((
  color: (
    primary: $isc-primary,
    accent: $isc-accent,
    warn: $isc-warn,
  ),
  typography: $isc-typography,
));

@include mat.all-component-themes($isc-theme);

/* ISC Portal Shared Tokens - CSS Custom Properties */
:root {
  /* Spacing - Shared between legacy and M3 systems */
  --spacing-xs: 4px;
  --spacing-sm: 8px;
  --spacing-md: 16px;
  --spacing-lg: 24px;
  --spacing-xl: 32px;
  --spacing-2xl: 48px;
}

/* Global Styles */
* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

html, body {
  height: 100%;
}

body {
  margin: 0;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
  font-size: 14px;
  line-height: 1.5;
  color: var(--md-sys-color-on-surface);
  background-color: var(--md-sys-color-surface);
}

/* M3 Focus Ring - WCAG 2.1 Compliance */
*:focus-visible {
  outline: 3px solid var(--md-sys-color-primary);
  outline-offset: 2px;
}

/* Legacy button and badge classes removed - Use M3 classes from material-design-3-theme.scss:
   - md3-button-filled, md3-button-outlined, md3-button-text
   - badge-m3 with badge-success, badge-warning, badge-error, badge-info, badge-neutral
   - See MATERIAL_DESIGN_3_GUIDE.md for migration examples
*/

/* Material Form Field and Button Height Consistency */
.mat-form-field {
  .mat-form-field-wrapper {
    padding-bottom: 0 !important;
  }

  .mat-form-field-infix {
    display: flex !important;
    align-items: center !important;
    border-top: 0 !important;
    // Reduce excessive vertical padding to match button heights
    padding-top: 0px !important;
    padding-bottom: 0px !important;
    min-height: 36px !important;
    height: 36px !important;

    // Ensure input text is vertically centered - use flexbox
    input,
    .mat-select,
    .mat-select-trigger {
      height: 36px !important;
      line-height: 1 !important; // Reset line-height to normal
      padding: 0 !important;
      margin: 0 !important;
      border: none !important;
      display: inline-flex !important;
      align-items: center !important;
      vertical-align: middle !important;
    }

    // Fix placeholder text alignment
    input::placeholder {
      line-height: 1 !important;
    }
  }

  // Ensure prefix/suffix icons are vertically centered
  .mat-form-field-prefix,
  .mat-form-field-suffix {
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    // Match the infix height EXACTLY instead of using 100%
    height: 36px !important;
    min-height: 36px !important;
    // Material applies position: relative with top: 4px - use transform to perfectly center
    transform: translateY(2px) !important;

    mat-icon {
      display: flex !important;
      align-items: center !important;
      line-height: 1 !important;
    }
  }
}

/* Fix mat-select dropdown arrow alignment - SYSTEMIC FIX for ALL selects */
.mat-form-field .mat-select {
  // Ensure select trigger is vertically centered
  .mat-select-value {
    display: flex !important;
    align-items: center !important;
    line-height: 1 !important;
  }

  // Fix the dropdown arrow alignment
  .mat-select-arrow-wrapper {
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    height: 36px !important;
    // Material applies positioning offset - use smaller adjustment than prefix icons
    transform: translateY(0px) !important;

    .mat-select-arrow {
      display: flex !important;
      align-items: center !important;
    }
  }
}

/* Ensure all Material buttons have consistent height and accessible hover states */
.mat-button,
.mat-raised-button,
.mat-stroked-button,
.mat-flat-button {
  min-height: 36px;
  line-height: 36px;
  padding: 0 16px;

  .mat-button-wrapper {
    display: flex !important;
    align-items: center;
    justify-content: center;
    gap: 8px; // Consistent spacing between text and icons
    line-height: normal;
  }

  // Fix icon sizing and remove margins (use gap instead)
  mat-icon {
    margin: 0 !important;
    flex-shrink: 0;
  }
}

/* Fix stroked button padding to account for 2px border */
.mat-stroked-button {
  padding: 0 17px !important;
}

/* WCAG 2.1 Level AA Compliant Hover States - Enhanced Contrast */
.mat-raised-button:not([disabled]):hover {
  background-color: #0A4ECC !important;
  box-shadow: var(--md-sys-elevation-level2);

  // Target text content inside wrapper AND M3 typography classes
  .mat-button-wrapper {
    color: white !important;

    // Override M3 label classes that apply their own color
    span,
    .md3-label-large,
    .md3-label-medium,
    .md3-label-small {
      color: white !important;
    }
  }

  mat-icon {
    color: white !important;
  }
}

.mat-stroked-button:not([disabled]):hover {
  background-color: #0A4ECC !important;
  border-color: #0A4ECC !important;
  border-width: 2px !important;

  // Target text content inside wrapper AND M3 typography classes
  .mat-button-wrapper {
    color: white !important;

    // Override M3 label classes that apply their own color
    span,
    .md3-label-large,
    .md3-label-medium,
    .md3-label-small {
      color: white !important;
    }
  }

  mat-icon {
    color: white !important;
  }
}

.mat-flat-button:not([disabled]):hover {
  background-color: #0A4ECC !important;
  box-shadow: var(--md-sys-elevation-level2);

  // Target text content inside wrapper AND M3 typography classes
  .mat-button-wrapper {
    color: white !important;

    // Override M3 label classes that apply their own color
    span,
    .md3-label-large,
    .md3-label-medium,
    .md3-label-small {
      color: white !important;
    }
  }

  mat-icon {
    color: white !important;
  }
}

.mat-button:not([disabled]):hover {
  background-color: #0A4ECC !important;

  // Target text content inside wrapper AND M3 typography classes
  .mat-button-wrapper {
    color: white !important;

    // Override M3 label classes that apply their own color
    span,
    .md3-label-large,
    .md3-label-medium,
    .md3-label-small {
      color: white !important;
    }
  }

  mat-icon {
    color: white !important;
  }
}

/* Ensure icon buttons maintain square aspect ratio */
.mat-icon-button {
  min-height: 40px;
  min-width: 40px;
}

/* M3 Utility Classes */
.container {
  max-width: 1400px;
  margin: 0 auto;
  padding: var(--spacing-lg);
}

.card {
  background-color: var(--md-sys-color-surface);
  border-radius: var(--md-sys-shape-corner-medium);
  box-shadow: var(--md-sys-elevation-level1);
  padding: var(--spacing-lg);
}

/* Typography utilities - Use M3 typography classes instead (md3-body-large, md3-label-medium, etc.) */
.text-sm { font-size: 12px; }
.text-base { font-size: 14px; }
.text-lg { font-size: 16px; }
.text-xl { font-size: 18px; }

.font-normal { font-weight: 400; }
.font-medium { font-weight: 500; }
.font-semibold { font-weight: 600; }

/* Color utilities - Use M3 semantic colors */
.text-on-surface { color: var(--md-sys-color-on-surface); }
.text-on-surface-variant { color: var(--md-sys-color-on-surface-variant); }
.text-primary { color: var(--md-sys-color-primary); }
.text-error { color: var(--md-sys-color-error); }

/* Spacing utilities */
.mb-0 { margin-bottom: 0; }
.mb-1 { margin-bottom: var(--spacing-xs); }
.mb-2 { margin-bottom: var(--spacing-sm); }
.mb-3 { margin-bottom: var(--spacing-md); }
.mb-4 { margin-bottom: var(--spacing-lg); }

.mt-0 { margin-top: 0; }
.mt-1 { margin-top: var(--spacing-xs); }
.mt-2 { margin-top: var(--spacing-sm); }
.mt-3 { margin-top: var(--spacing-md); }
.mt-4 { margin-top: var(--spacing-lg); }
